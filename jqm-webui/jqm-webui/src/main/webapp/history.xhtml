<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">

<h:outputLink value="faces/jobdef.xhtml">
	<h:outputText value="Job definition" />
</h:outputLink>

<h:outputText value="   --   " />

<h:outputLink value="faces/queue.xhtml">
	<h:outputText value="Queue" />
</h:outputLink>

<h:outputText value="   --   " />

<h:outputLink value="faces/history.xhtml">
	<h:outputText value="History" />
</h:outputLink>

<h:head>
<title>History</title>
</h:head>

<meta http-equiv="cache-control" content="no-cache" />

<h:form>

	<p:dataTable id="dataTable" var="h" value="#{history.hs}"  
		sortMode="multiple" rows="25" paginator="true" filteredValue="#{history.filteredhs}" 
		rowsPerPageTemplate="5,10,15,20,25,30,40,50,60" >

		<p:column id="idColumn" headerText="ID" filterBy="id" >
			<h:outputText value="#{h.id}" />
		</p:column>
		<p:column headerText="Returned Value" filterBy="returnedValue">
			<h:outputText value="#{h.returnedValue}" />
		</p:column>
		<p:column headerText="Job Definition" filterBy="jd.applicationName">
			<h:outputText value="#{h.jd.applicationName}" />
		</p:column>
		<p:column headerText="Session ID" filterBy="sessionId">
			<h:outputText value="#{h.sessionId}" />
		</p:column>
		<p:column headerText="Queue" filterBy="queue.name">
			<h:outputText value="#{h.queue.name}" />
		</p:column>
		<p:column headerText="JobInstance ID" filterBy="jobInstanceId">
			<h:outputText value="#{h.jobInstanceId}" />
		</p:column>
		<p:column headerText="Enqueue Date" filterBy="enqueueDate.time">
			<h:outputText value="#{h.enqueueDate.time}">
			<f:convertDateTime type="date" pattern="yyyy.MM.dd 'at' HH:mm:ss"/>
			</h:outputText>
		</p:column>
		<p:column headerText="Execution Date" filterBy="executionDate.time">
			<h:outputText value="#{h.executionDate.time}">
			<f:convertDateTime type="date" pattern="yyyy.MM.dd 'at' HH:mm:ss"/>
			</h:outputText>
		</p:column>
		<p:column headerText="End Date" filterBy="endDate.time">
			<h:outputText value="#{h.endDate.time}">
			<f:convertDateTime type="date" pattern="yyyy.MM.dd 'at' HH:mm:ss"/>
			</h:outputText>
		</p:column>
		<p:column headerText="User Name" filterBy="userName">
			<h:outputText value="#{h.userName}" />
		</p:column>
		<p:column headerText="Node" filterBy="node.listeningInterface">
			<h:outputText value="#{h.node.listeningInterface}" />
		</p:column>
		<p:column headerText="Email" filterBy="email">
			<h:outputText value="#{h.email}" />
		</p:column>
		<p:column headerText="Parent Job ID" filterBy="parentJobId">
			<h:outputText value="#{h.parentJobId}" />
		</p:column>
		<p:column headerText="Status" filterBy="status">
			<h:outputText value="#{h.status}" />
		</p:column>
		<p:column headerText="Other 1" filterBy="other1">
			<h:outputText value="#{h.other1}" />
		</p:column>
		<p:column headerText="Other 2" filterBy="other2">
			<h:outputText value="#{h.other2}" />
		</p:column>
		<p:column headerText="Other 3" filterBy="other3">
			<h:outputText value="#{h.other3}" />
		</p:column>
		<p:column headerText="Application" filterBy="application">
			<h:outputText value="#{h.application}" />
		</p:column>
		<p:column headerText="Module" filterBy="module">
			<h:outputText value="#{h.module}" />
		</p:column>
		<p:column headerText="Progression" filterBy="progress">
			<h:outputText value="#{h.progress}" />
		</p:column>

	</p:dataTable>
	
	<p>
		<h:commandButton value="Actualize"
			action="#{history.reload}" />
	</p>	

</h:form>
</html>